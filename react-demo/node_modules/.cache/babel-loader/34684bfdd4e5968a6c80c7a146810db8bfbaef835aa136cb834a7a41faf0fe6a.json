{"ast":null,"code":"import _objectSpread from \"D:/MATERIALE AN 4 SEM 1/SD/proiect/ds2023_30642_fazakas_edina_assignment_1/react-demo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"D:/MATERIALE AN 4 SEM 1/SD/proiect/ds2023_30642_fazakas_edina_assignment_1/react-demo/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/MATERIALE AN 4 SEM 1/SD/proiect/ds2023_30642_fazakas_edina_assignment_1/react-demo/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"D:/MATERIALE AN 4 SEM 1/SD/proiect/ds2023_30642_fazakas_edina_assignment_1/react-demo/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"D:/MATERIALE AN 4 SEM 1/SD/proiect/ds2023_30642_fazakas_edina_assignment_1/react-demo/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"D:/MATERIALE AN 4 SEM 1/SD/proiect/ds2023_30642_fazakas_edina_assignment_1/react-demo/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"D:\\\\MATERIALE AN 4 SEM 1\\\\SD\\\\proiect\\\\ds2023_30642_fazakas_edina_assignment_1\\\\react-demo\\\\src\\\\device\\\\components\\\\device-delete-form.js\";\nimport React from \"react\";\nimport { Button, Col, FormGroup, Input, Label, Row } from \"reactstrap\";\nimport APIResponseErrorMessage from \"../../commons/errorhandling/api-response-error-message\";\nimport * as API_DEVICES from \"../../device/api/device-api\";\nimport validate from \"./validators/device-validators\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar DeviceDeleteForm = /*#__PURE__*/function (_React$Component) {\n  _inherits(DeviceDeleteForm, _React$Component);\n  var _super = _createSuper(DeviceDeleteForm);\n  function DeviceDeleteForm(props) {\n    var _this;\n    _classCallCheck(this, DeviceDeleteForm);\n    _this = _super.call(this, props);\n    _this.handleChange = function (event) {\n      var name = event.target.name;\n      var value = event.target.value;\n      var updatedControls = _objectSpread({}, _this.state.formControls);\n      var updatedFormElement = updatedControls[name];\n      updatedFormElement.value = value;\n      updatedFormElement.touched = true;\n      updatedFormElement.valid = validate(value, updatedFormElement.validationRules);\n      updatedControls[name] = updatedFormElement;\n      var formIsValid = true;\n      for (var formElementName in updatedControls) {\n        formIsValid = updatedControls[formElementName].valid && formIsValid;\n      }\n      _this.setState({\n        formControls: updatedControls,\n        formIsValid: formIsValid\n      });\n    };\n    _this.deleteDevice = function () {\n      var deviceID = _this.state.formControls.id.value;\n      var token = sessionStorage.getItem('userToken'); // Change to 'userToken'\n      var secretKey = sessionStorage.getItem('secretKey');\n      API_DEVICES.deleteDevice(deviceID, token, secretKey).then(function (_ref) {\n        var result = _ref.result,\n          status = _ref.status,\n          error = _ref.error;\n        if (result !== null && (status === 200 || status === 201)) {\n          var response = {\n            message: 'Successfully deleted device with ID: ' + deviceID\n          };\n          alert(response.message);\n          console.log(\"Successfully deleted device with ID: \" + deviceID);\n          _this.reloadHandler(); // If this is sufficient to update your component, use it\n          window.location.reload(); // Use this line if you want to refresh the entire page\n        } else {\n          _this.setState({\n            errorStatus: status,\n            error: error\n          });\n        }\n      }).catch(function (error) {\n        console.error('Error deleting device:', error);\n      });\n    };\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      _this.deleteDevice();\n    };\n    _this.toggleForm = _this.toggleForm.bind(_assertThisInitialized(_this));\n    _this.state = {\n      errorStatus: 0,\n      error: null,\n      formIsValid: false,\n      formControls: {\n        id: {\n          value: '',\n          placeholder: 'Device ID',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        }\n      }\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  _createClass(DeviceDeleteForm, [{\n    key: \"toggleForm\",\n    value: function toggleForm() {\n      this.setState({\n        collapseForm: !this.state.collapseForm\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n          id: \"id\",\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            for: \"id\",\n            children: \" Device ID: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"id\" // Adding the name attribute\n            ,\n            id: \"id\",\n            type: \"text\",\n            placeholder: this.state.formControls.id.placeholder,\n            onChange: this.handleChange,\n            value: this.state.formControls.id.value,\n            valid: this.state.formControls.id.valid,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            sm: {\n              size: '4',\n              offset: 8\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              disabled: !this.state.formIsValid,\n              onClick: this.handleSubmit,\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this);\n    }\n  }]);\n  return DeviceDeleteForm;\n}(React.Component);\nexport default DeviceDeleteForm;","map":{"version":3,"names":["React","Button","Col","FormGroup","Input","Label","Row","APIResponseErrorMessage","API_DEVICES","validate","jsxDEV","_jsxDEV","DeviceDeleteForm","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleChange","event","name","target","value","updatedControls","_objectSpread","state","formControls","updatedFormElement","touched","valid","validationRules","formIsValid","formElementName","setState","deleteDevice","deviceID","id","token","sessionStorage","getItem","secretKey","then","_ref","result","status","error","response","message","alert","console","log","reloadHandler","window","location","reload","errorStatus","catch","handleSubmit","preventDefault","toggleForm","bind","_assertThisInitialized","placeholder","isRequired","_createClass","key","collapseForm","render","children","for","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","required","sm","size","offset","disabled","onClick","Component"],"sources":["D:/MATERIALE AN 4 SEM 1/SD/proiect/ds2023_30642_fazakas_edina_assignment_1/react-demo/src/device/components/device-delete-form.js"],"sourcesContent":["import React from \"react\";\r\nimport { Button, Col, FormGroup, Input, Label, Row } from \"reactstrap\";\r\nimport APIResponseErrorMessage from \"../../commons/errorhandling/api-response-error-message\";\r\nimport * as API_DEVICES from \"../../device/api/device-api\";\r\nimport validate from \"./validators/device-validators\";\r\n\r\nclass DeviceDeleteForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.toggleForm = this.toggleForm.bind(this);\r\n\r\n        this.state = {\r\n            errorStatus: 0,\r\n            error: null,\r\n            formIsValid: false,\r\n            formControls: {\r\n                id: {\r\n                    value: '',\r\n                    placeholder: 'Device ID',\r\n                    valid: false,\r\n                    touched: false,\r\n                    validationRules: {\r\n                        isRequired: true,\r\n                    },\r\n                },\r\n            },\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    toggleForm() {\r\n        this.setState({ collapseForm: !this.state.collapseForm });\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        const updatedControls = { ...this.state.formControls };\r\n        const updatedFormElement = updatedControls[name];\r\n\r\n        updatedFormElement.value = value;\r\n        updatedFormElement.touched = true;\r\n        updatedFormElement.valid = validate(value, updatedFormElement.validationRules);\r\n        updatedControls[name] = updatedFormElement;\r\n\r\n        let formIsValid = true;\r\n        for (let formElementName in updatedControls) {\r\n            formIsValid = updatedControls[formElementName].valid && formIsValid;\r\n        }\r\n\r\n        this.setState({\r\n            formControls: updatedControls,\r\n            formIsValid: formIsValid,\r\n        });\r\n    };\r\n\r\n    deleteDevice = () => {\r\n        const deviceID = this.state.formControls.id.value;\r\n        const token = sessionStorage.getItem('userToken'); // Change to 'userToken'\r\n        const secretKey = sessionStorage.getItem('secretKey');\r\n\r\n        API_DEVICES.deleteDevice(deviceID, token, secretKey)\r\n            .then(({ result, status, error }) => {\r\n                if (result !== null && (status === 200 || status === 201)) {\r\n                    const response = { message: 'Successfully deleted device with ID: ' + deviceID };\r\n                    alert(response.message);\r\n                    console.log(\"Successfully deleted device with ID: \" + deviceID);\r\n                    this.reloadHandler(); // If this is sufficient to update your component, use it\r\n                    window.location.reload(); // Use this line if you want to refresh the entire page\r\n                } else {\r\n                    this.setState({\r\n                        errorStatus: status,\r\n                        error: error,\r\n                    });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('Error deleting device:', error);\r\n            });\r\n    };\r\n\r\n\r\n    handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        this.deleteDevice();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <FormGroup id='id'>\r\n                    <Label for='id'> Device ID: </Label>\r\n                    <Input\r\n                        name='id' // Adding the name attribute\r\n                        id='id'\r\n                        type='text'\r\n                        placeholder={this.state.formControls.id.placeholder}\r\n                        onChange={this.handleChange}\r\n                        value={this.state.formControls.id.value}\r\n                        valid={this.state.formControls.id.valid}\r\n                        required\r\n                    />\r\n                </FormGroup>\r\n\r\n                <Row>\r\n                    <Col sm={{ size: '4', offset: 8 }}>\r\n                        <Button type=\"submit\" disabled={!this.state.formIsValid} onClick={this.handleSubmit}>\r\n                            Submit\r\n                        </Button>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DeviceDeleteForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}